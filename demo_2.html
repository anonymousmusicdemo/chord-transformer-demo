<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chord-Emotion Transformer Music Demo</title>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.5.0"></script>    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
            background-color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #0066cc;
            padding-bottom: 10px;
        }

        h2 {
            font-size: 22px;
            margin-top: 40px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #2c3e50;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
            color: #555;
        }

        /* 样式化 MIDI 播放器部分 */
        .music-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* 为我们的模型添加一点高亮样式，以示区别 */
        .highlight-section {
            background-color: #f0f7ff;
            border: 1px solid #cce5ff;
        }

        .main-demo-container {
            background-color: #f0f7ff;
            border: 1px solid #cce5ff;
        }

        .demo-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 16px;
            color: #0066cc;
        }

        /* 针对 midi-player 的自定义样式 */
        midi-player {
            display: block;
            width: 100%;
            margin-bottom: 10px;
        }

        midi-player::part(control-panel) {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        midi-player::part(play-button) {
            color: #333;
            border: 1px solid #ccc;
            background-color: #f8f8f8;
            border-radius: 4px;
        }

        midi-player::part(play-button):hover {
            background-color: #e8e8e8;
        }

        /* 卷帘图样式 */
        midi-visualizer .piano-roll-visualizer {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
            height: 500px; 
            overflow: auto; 
        }

        midi-visualizer svg rect.note {
            opacity: 0.8;
            stroke-width: 1;
            fill: #0066cc;
        }
        
        midi-visualizer svg rect.note.active {
            opacity: 1;
            stroke: #000;
            fill: #ff6b6b;
        }

        /* 列表展示样式 */
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            .demo-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
            color: #888;
            text-align: center;
        }

        .footer a {
            color: #0066cc;
            text-decoration: none;
        }

        /* --- Score (图片) 区域样式 --- */
        .score-section {
            margin-top: 20px;
            margin-bottom: 40px;
            text-align: center;
        }
        
        /* 图片自适应宽度 */
        .score-image {
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: block; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Chord-Emotion Transformer Music Generation</h1>
        
        <p>This demo page is a supplement to the first version of the demo page. It includes the music for the scores presented in the paper, corrected chord annotations, and additional demos generated by the Chord-Transformer model.</p>

        <h2>Main Generation Example</h2>
        
        <div class="music-section main-demo-container">
            <div class="demo-title">Demo of the score in the paper</div>
            <p>This is the MIDI music corresponding to the scores presented in the paper.</p>
            
            <midi-player
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/D_maj-A_maj-B_min-G_maj-D_maj_63.mid"
                sound-font
                visualizer="#main-vis">
            </midi-player>
            
            <midi-visualizer
                type="piano-roll"
                id="main-vis"
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/D_maj-A_maj-B_min-G_maj-D_maj_63.mid">
            </midi-visualizer>
        </div>

        <div class="score-section">
            <div class="demo-title" style="text-align: left; margin-bottom: 10px;">Corresponding Score</div>
            <img 
                class="score-image" 
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/score.png" 
                alt="Generated Music Score">
        </div>

        <h2>Comparative Experiment</h2>
        <p>To demonstrate the superiority of our model, we conducted a comparative experiment using the chord progression <strong>G:maj - C:maj - D:maj - G:maj</strong> as input. Below are the results generated by various baseline models compared to our Chord-Transformer.</p>

        <div class="demo-grid">
            <div class="music-section highlight-section">
                <div class="demo-title" style="color: #d9534f;">Chord-Transformer (POP909) [Ours]</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/G:maj-C:maj-D:maj-G:maj_120.mid" sound-font></midi-player>
            </div>
            <div class="music-section highlight-section">
                <div class="demo-title" style="color: #d9534f;">Chord-Transformer (LMD) [Ours]</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/lmd.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">NotaGen</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/notagen.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title">Music Transformer</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/musictransformer.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title">MusicLM</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/musiclm.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title">BebopNet</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/bebopnet.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title">XiaoIce Band</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/xiaoiceband.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title">MINGUS</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/mingus.mid" sound-font></midi-player>
            </div>
        </div>

        <h2>Continuous Label Control (Emotional Control)</h2>
        <p>
        We extend traditional models by extracting six continuous label dimensions that capture both emotional and performative attributes—specifically <strong>Arousal, Valence, Danceability, Energy, Instrumentalness, and Liveness</strong>. For clarity and demonstration purposes, we focus here on three representative dimensions, generating samples with extreme values (High vs. Low) for <strong>Arousal</strong>, <strong>Valence</strong>, and <strong>Danceability</strong> to showcase the model's controllability.        </p>

        <h3>1. Arousal (Excitement Level)</h3>
        <p>
            Measures the excitement level. High values indicate energetic or fast-paced music; low values indicate calm or soothing music[cite: 275].
        </p>
        <div class="demo-grid">
            <div class="music-section">
                <div class="demo-title" style="color: #d9534f;">High Arousal</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Fast-paced, Energetic</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/high_arousal.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title" style="color: #0066cc;">Low Arousal</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Calm, Soothing</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/low_arousal.mid" sound-font></midi-player>
            </div>
        </div>

        <h3 style="margin-top: 30px;">2. Valence (Emotional Polarity)</h3>
        <p>
            Represents emotional polarity. Positive values denote happy/uplifting emotions; negative values denote sad/melancholic emotions[cite: 276].
        </p>
        <div class="demo-grid">
            <div class="music-section">
                <div class="demo-title" style="color: #d9534f;">High Valence</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Happy, Uplifting</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/high_valence.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title" style="color: #0066cc;">Low Valence</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Sad, Melancholic</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/low_valence.mid" sound-font></midi-player>
            </div>
        </div>

        <h3 style="margin-top: 30px;">3. Danceability (Rhythmic Suitability)</h3>
        <p>
            Measures rhythmic suitability for dancing, closely related to groove and rhythmic regularity[cite: 277].
        </p>
        <div class="demo-grid">
            <div class="music-section">
                <div class="demo-title" style="color: #d9534f;">High Danceability</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Strong Groove, Rhythmic</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/high_dancebility.mid" sound-font></midi-player>
            </div>
            <div class="music-section">
                <div class="demo-title" style="color: #0066cc;">Low Danceability</div>
                <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Characteristics: Irregular, Less Rhythmic</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/low_dancebility.mid" sound-font></midi-player>
            </div>
        </div>
        
        <h2>Additional Generated Samples</h2>
        <p>Below are 10 additional samples generated by the model under various harmonic constraints. These demonstrate the diversity and adaptability of the model.</p>
        
        <div class="demo-grid">
            
            <div class="music-section">
                <div class="demo-title">Demo 1: A Maj - F# Maj - D Maj - E Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/A:maj-F%23:maj-D:maj-E:maj_36.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 2: D Maj - A Maj - B Min - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/D:maj-A:maj-B:min-G:maj-D:maj_108.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 3: D Min - G Maj - A Min - F Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/D:min-G:maj-A:min-F:maj_39.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 4: G Maj - C Maj - D Maj - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/G:maj-C:maj-D:maj-G:maj_105.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 5: G Maj - C Maj - G Maj - D Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/G:maj-C:maj-G:maj-D:maj-G:maj_37.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 6: A Maj - F# Maj - D Maj - E Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/A:maj-F%23:maj-D:maj-E:maj_101.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 7: D Maj - A Maj - B Min - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/D:maj-A:maj-B:min-G:maj-D:maj_103.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 8: D Min - G Maj - A Min - F Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/D:min-G:maj-A:min-F:maj_104.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 9: G Maj - C Maj - D Maj - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/G:maj-C:maj-D:maj-G:maj_100.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 10: G Maj - C Maj - G Maj - D Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/G:maj-C:maj-G:maj-D:maj-G:maj_102.mid" sound-font></midi-player>
            </div>

        </div>

        <div class="footer">
            Powered by <a href="https://cifkao.github.io/html-midi-player/" target="_blank">html-midi-player</a> & @magenta/music.
        </div>
    </div>
</body>
</html>
