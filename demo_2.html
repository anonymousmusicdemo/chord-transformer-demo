<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chord-Transformer Music Demo</title>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.5.0"></script>    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
            background-color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #0066cc;
            padding-bottom: 10px;
        }

        h2 {
            font-size: 22px;
            margin-top: 40px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #2c3e50;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
            color: #555;
        }

        .music-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .main-demo-container {
            background-color: #f0f7ff;
            border: 1px solid #cce5ff;
        }

        .demo-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 16px;
            color: #0066cc;
        }

        midi-player {
            display: block;
            width: 100%;
            margin-bottom: 10px;
        }

        midi-player::part(control-panel) {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        midi-player::part(play-button) {
            color: #333;
            border: 1px solid #ccc;
            background-color: #f8f8f8;
            border-radius: 4px;
        }

        midi-player::part(play-button):hover {
            background-color: #e8e8e8;
        }

        midi-visualizer .piano-roll-visualizer {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
            height: 500px; 
            overflow: auto; 
        }

        midi-visualizer svg rect.note {
            opacity: 0.8;
            stroke-width: 1;
            fill: #0066cc;
        }
        
        midi-visualizer svg rect.note.active {
            opacity: 1;
            stroke: #000;
            fill: #ff6b6b;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            .demo-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
            color: #888;
            text-align: center;
        }

        .footer a {
            color: #0066cc;
            text-decoration: none;
        }

        /* --- 新增 PDF 区域样式 --- */
        .pdf-section {
            margin-top: 20px;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .pdf-viewer {
            width: 100%;
            height: 600px; /* 设置足够的高度来显示PDF */
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Chord-Transformer Music Generation</h1>
        
        <p>This demo page is a supplement to the first version of the demo page. It includes the music for the scores presented in the paper, corrected chord annotations, and additional demos generated by the Chord-Transformer model.</p>

        <h2>Main Generation Example</h2>
        
        <div class="music-section main-demo-container">
            <div class="demo-title">Demo of the sheet music in the paper</div>
            <p>This is the MIDI music corresponding to the scores presented in the paper.</p>
            
            <midi-player
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/D_maj-A_maj-B_min-G_maj-D_maj_63.mid"
                sound-font
                visualizer="#main-vis">
            </midi-player>
            
            <midi-visualizer
                type="piano-roll"
                id="main-vis"
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/D_maj-A_maj-B_min-G_maj-D_maj_63.mid">
            </midi-visualizer>
        </div>

        <div class="pdf-section">
            <div class="demo-title" style="text-align: left; margin-bottom: 10px;">Corresponding Sheet Music</div>
            <embed 
                class="pdf-viewer" 
                src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/01.pdf" 
                type="application/pdf">
            
            <p style="font-size: 12px; color: #666; margin-top: 5px;">
                Unable to view PDF? <a href="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/01.pdf" target="_blank">Download here</a>.
            </p>
        </div>

        <h2>Additional Generated Samples</h2>
        <p>Below are 10 additional samples generated by the model under various harmonic constraints. These demonstrate the diversity and adaptability of the model.</p>
        
        <div class="demo-grid">
            
            <div class="music-section">
                <div class="demo-title">Demo 1: A Maj - F# Maj - D Maj - E Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/A:maj-F%23:maj-D:maj-E:maj_36.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 2: D Maj - A Maj - B Min - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/D:maj-A:maj-B:min-G:maj-D:maj_13.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 3: D Min - G Maj - A Min - F Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/D:min-G:maj-A:min-F:maj_39.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 4: G Maj - C Maj - D Maj - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/G:maj-C:maj-D:maj-G:maj_40.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 5: G Maj - C Maj - G Maj - D Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/2/G:maj-C:maj-G:maj-D:maj-G:maj_37.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 6: A Maj - F# Maj - D Maj - E Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/A:maj-F%23:maj-D:maj-E:maj_101.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 7: D Maj - A Maj - B Min - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/D:maj-A:maj-B:min-G:maj-D:maj_103.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 8: D Min - G Maj - A Min - F Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/D:min-G:maj-A:min-F:maj_104.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 9: G Maj - C Maj - D Maj - G Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/G:maj-C:maj-D:maj-G:maj_100.mid" sound-font></midi-player>
            </div>

            <div class="music-section">
                <div class="demo-title">Demo 10: G Maj - C Maj - G Maj - D Maj</div>
                <midi-player src="https://raw.githubusercontent.com/anonymousmusicdemo/chord-transformer-demo/main/great/3/G:maj-C:maj-G:maj-D:maj-G:maj_102.mid" sound-font></midi-player>
            </div>

        </div>

        <div class="footer">
            Powered by <a href="https://cifkao.github.io/html-midi-player/" target="_blank">html-midi-player</a> & @magenta/music.
        </div>
    </div>
</body>
</html>